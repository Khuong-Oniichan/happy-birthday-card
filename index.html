<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>üéÇ Surprise! üéâ</title>
  <style>
    :root{
      --bg1:#667eea; --bg2:#764ba2; --card:#ffffffdd;
      --accent:#ff6b6b; --accent-hover:#ff5252;
      --text-primary:#2c3e50; --text-secondary:#7f8c8d;
      --shadow:0 20px 60px rgba(0,0,0,0.15);
      --border-radius:16px;
    }
    
    * { box-sizing: border-box; }
    
    html,body{
      height:100%; margin:0; overflow-x:hidden;
      font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;
    }
    
    body{
      background:linear-gradient(135deg,var(--bg1),var(--bg2));
      display:flex; align-items:center; justify-content:center;
      position:relative; transition:all 0.3s ease;
    }
    
    /* Loading screen */
    .loading-screen{
      position:fixed; top:0; left:0; width:100%; height:100%;
      background:linear-gradient(135deg,#667eea,#764ba2);
      display:flex; flex-direction:column; align-items:center; justify-content:center;
      z-index:10000; transition:opacity 0.8s ease;
    }
    
    .loading-spinner{
      width:60px; height:60px; border:4px solid rgba(255,255,255,0.3);
      border-top:4px solid white; border-radius:50%;
      animation:spin 1s linear infinite; margin-bottom:20px;
    }
    
    @keyframes spin { 0%{transform:rotate(0deg)} 100%{transform:rotate(360deg)} }
    
    .loading-text{
      color:white; font-size:18px; font-weight:500;
      animation:pulse 1.5s ease-in-out infinite;
    }
    
    @keyframes pulse { 0%,100%{opacity:1} 50%{opacity:0.6} }
    
    /* Main card */
    .surprise-card{
      width:90%; max-width:600px; min-height:400px;
      background:var(--card); backdrop-filter:blur(20px);
      border-radius:var(--border-radius); box-shadow:var(--shadow);
      padding:40px; text-align:center; position:relative;
      transform:scale(0.8); opacity:0;
      transition:all 0.6s cubic-bezier(0.34,1.56,0.64,1);
      display:flex; flex-direction:column; align-items:center; justify-content:center;
    }
    
    .surprise-card.show{
      transform:scale(1); opacity:1;
    }
    
    .main-title{
      font-size:clamp(24px,5vw,48px); font-weight:700;
      background:linear-gradient(45deg,var(--accent),#9c27b0);
      -webkit-background-clip:text; background-clip:text;
      -webkit-text-fill-color:transparent; margin:0 0 20px;
      animation:titleGlow 2s ease-in-out infinite alternate;
      text-align:center; width:100%;
    }
    
    @keyframes titleGlow{
      0%{filter:brightness(1)} 100%{filter:brightness(1.2)}
    }
    
    .recipient-name{
      font-size:clamp(20px,4vw,36px); font-weight:600;
      color:var(--text-primary); margin:10px 0 20px;
      position:relative; display:block;
      text-align:center; width:100%;
    }
    
    .profile-photo{
      width: 120px; height: 120px; border-radius: 50%;
      object-fit: cover; border: 4px solid #fff;
      box-shadow: 0 8px 25px rgba(0,0,0,0.15);
      margin: 15px auto; transition: all 0.3s ease;
      animation: profileGlow 3s ease-in-out infinite alternate;
      display: block;
    }
    
    .profile-photo:hover{
      transform: scale(1.05); box-shadow: 0 12px 35px rgba(255,107,107,0.3);
    }
    
    @keyframes profileGlow{
      0%{ box-shadow: 0 8px 25px rgba(0,0,0,0.15); }
      100%{ box-shadow: 0 8px 25px rgba(255,107,107,0.25); }
    }
    
    .birthday-message{
      font-size:clamp(14px,2.5vw,18px); color:var(--text-secondary);
      line-height:1.6; margin:20px auto 30px; max-width:80%; 
      text-align:center; display:block;
    }
    
    .surprise-button{
      background:linear-gradient(45deg,var(--accent),#ff8a80);
      border:none; border-radius:25px; padding:15px 30px;
      color:white; font-size:16px; font-weight:600;
      cursor:pointer; position:relative; overflow:hidden;
      transition:all 0.3s ease; text-transform:uppercase;
      letter-spacing:1px; min-width:200px; margin:10px auto;
      display:block;
    }
    
    .surprise-button:hover{
      transform:translateY(-2px); box-shadow:0 10px 30px rgba(255,107,107,0.4);
    }
    
    .surprise-button::before{
      content:''; position:absolute; top:0; left:-100%;
      width:100%; height:100%; background:linear-gradient(90deg,transparent,rgba(255,255,255,0.3),transparent);
      transition:left 0.5s ease;
    }
    
    .surprise-button:hover::before{
      left:100%;
    }
    
    /* Floating animations */
    .floating-element{
      position:absolute; pointer-events:none;
      animation:float 6s ease-in-out infinite;
    }
    
    @keyframes float{
      0%,100%{transform:translateY(0px) rotate(0deg)}
      50%{transform:translateY(-20px) rotate(5deg)}
    }
    
    .birthday-icon{
      font-size: 24px;
      opacity: 0.7;
      filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.2));
    }
    
    .birthday-icon.cake{
      font-size: 28px;
    }
    
    .birthday-icon.gift{
      animation: float 7s ease-in-out infinite;
    }
    
    .birthday-icon.balloon{
      animation: float 5s ease-in-out infinite;
    }
    
    .birthday-icon.star{
      animation: float 6.5s ease-in-out infinite;
      filter: drop-shadow(0 0 8px rgba(255,215,0,0.6));
    }
    
    /* Responsive design */
    @media (max-width:768px){
      .surprise-card{ padding:30px 20px; }
      .surprise-button{ padding:12px 25px; font-size:14px; min-width:180px; }
    }
    
    /* Hidden by default */
    .hidden{ display:none !important; }
  </style>
</head>
<body>
  <!-- Loading Screen -->
  <div class="loading-screen" id="loadingScreen">
    <div class="loading-spinner"></div>
    <div class="loading-text">ƒêang chu·∫©n b·ªã b·∫•t ng·ªù...</div>
  </div>

  <!-- Main Surprise Card -->
  <div class="surprise-card" id="surpriseCard">
    <h1 class="main-title">üéâ HAPPY BIRTHDAY üéÇ</h1>
    
    <!-- Profile Photo -->
    <img src="profile.jpg" alt="Profile Photo" class="profile-photo" id="profilePhoto" 
         onerror="this.style.display='none';">
    
    <div class="recipient-name" id="recipientName">
      B√πi Ng·ªçc Minh Qu√¢n
    </div>
    
    <div class="birthday-message" id="birthdayMessage">
      Ch√∫c b·∫°n sinh nh·∫≠t th·∫≠t nhi·ªÅu ni·ªÅm vui, h·∫°nh ph√∫c v√† th√†nh c√¥ng! 
      Mong r·∫±ng tu·ªïi m·ªõi s·∫Ω mang ƒë·∫øn cho b·∫°n nh·ªØng tr·∫£i nghi·ªám tuy·ªát v·ªùi nh·∫•t! ‚ú®üéà
    </div>
    
    <button class="surprise-button" id="surpriseBtn" onclick="triggerSurprise()">
      üéÅ Nh·∫•n ƒë·ªÉ nh·∫≠n qu√†
    </button>
    
    <!-- Floating elements -->
    <div class="floating-element birthday-icon cake" style="top:10%; left:10%; animation-delay:0s;">üéÇ</div>
    <div class="floating-element birthday-icon gift" style="top:20%; right:15%; animation-delay:1s;">üéÅ</div>
    <div class="floating-element birthday-icon balloon" style="bottom:20%; left:20%; animation-delay:2s;">üéà</div>
    <div class="floating-element birthday-icon star" style="bottom:10%; right:10%; animation-delay:0.5s;">‚≠ê</div>
  </div>

  <!-- Canvas for effects -->
  <canvas id="effectsCanvas"></canvas>

  <script>
    // Configuration object for easy customization
    const CONFIG = {
      recipient: 'B√πi Ng·ªçc Minh Qu√¢n',
      message: 'Ch√∫c b·∫°n sinh nh·∫≠t th·∫≠t nhi·ªÅu ni·ªÅm vui, h·∫°nh ph√∫c v√† th√†nh c√¥ng! Mong r·∫±ng tu·ªïi m·ªõi s·∫Ω mang ƒë·∫øn cho b·∫°n nh·ªØng tr·∫£i nghi·ªám tuy·ªát v·ªùi nh·∫•t! ‚ú®üéà',
      autoTrigger: true,
      loadingDuration: 2000,
      effects: {
        confetti: true,
        fireworks: true,
        music: true,
        shake: true,
        balloons: true
      }
    };

    // Global state
    let hasTriggered = false;
    let canvas, ctx;
    let particles = [];
    let animationId;

    // Initialize app
    function init() {
      setupCanvas();
      setupElements();
      
      if (CONFIG.autoTrigger) {
        showLoadingScreen();
      } else {
        hideLoadingScreen();
        showMainCard();
      }
    }

    // Setup canvas for effects
    function setupCanvas() {
      canvas = document.getElementById('effectsCanvas');
      ctx = canvas.getContext('2d');
      
      // Style canvas
      canvas.style.position = 'fixed';
      canvas.style.top = '0';
      canvas.style.left = '0';
      canvas.style.pointerEvents = 'none';
      canvas.style.zIndex = '9999';
      
      resizeCanvas();
      window.addEventListener('resize', resizeCanvas);
      
      // Start render loop
      renderLoop();
    }

    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }

    // Setup DOM elements
    function setupElements() {
      document.getElementById('recipientName').textContent = CONFIG.recipient;
      document.getElementById('birthdayMessage').textContent = CONFIG.message;
    }

    // Loading screen management
    function showLoadingScreen() {
      setTimeout(() => {
        hideLoadingScreen();
        showMainCard();
        if (CONFIG.autoTrigger) {
          setTimeout(triggerSurprise, 500);
        }
      }, CONFIG.loadingDuration);
    }

    function hideLoadingScreen() {
      const loading = document.getElementById('loadingScreen');
      loading.style.opacity = '0';
      setTimeout(() => loading.style.display = 'none', 800);
    }

    function showMainCard() {
      const card = document.getElementById('surpriseCard');
      setTimeout(() => card.classList.add('show'), 100);
    }

    // Main surprise trigger
    function triggerSurprise() {
      if (hasTriggered) return;
      hasTriggered = true;

      const btn = document.getElementById('surpriseBtn');
      btn.style.transform = 'scale(0.95)';
      btn.textContent = 'üéâ Wow! Amazing!';
      
      // Add photo sparkle effect
      addPhotoSparkles();
      
      // Trigger all effects
      if (CONFIG.effects.confetti) launchConfetti();
      if (CONFIG.effects.fireworks) launchFireworks();
      if (CONFIG.effects.music) playBirthdayTune();
      if (CONFIG.effects.shake) shakeScreen();
      if (CONFIG.effects.balloons) releaseBalloons();
      
      // Change background
      changeBackground();
      
      // Show success message
      setTimeout(showSuccessMessage, 1000);
    }

    // Effect functions
    function launchConfetti() {
      const centerX = window.innerWidth / 2;
      const centerY = window.innerHeight / 3;
      
      for (let i = 0; i < 150; i++) {
        particles.push(createConfettiParticle(centerX, centerY));
      }
      
      // Second wave
      setTimeout(() => {
        for (let i = 0; i < 100; i++) {
          particles.push(createConfettiParticle(centerX, centerY));
        }
      }, 500);
    }

    function createConfettiParticle(x, y) {
      return {
        x: x + (Math.random() - 0.5) * 100,
        y: y + (Math.random() - 0.5) * 50,
        vx: (Math.random() - 0.5) * 15,
        vy: -(Math.random() * 15 + 5),
        rotation: Math.random() * 360,
        rotationSpeed: (Math.random() - 0.5) * 10,
        size: Math.random() * 8 + 4,
        color: getRandomColor(),
        life: 180,
        gravity: 0.5,
        type: 'confetti'
      };
    }

    function launchFireworks() {
      const positions = [
        { x: window.innerWidth * 0.2, y: window.innerHeight * 0.3 },
        { x: window.innerWidth * 0.8, y: window.innerHeight * 0.3 },
        { x: window.innerWidth * 0.5, y: window.innerHeight * 0.2 }
      ];

      positions.forEach((pos, index) => {
        setTimeout(() => {
          for (let i = 0; i < 50; i++) {
            particles.push(createFireworkParticle(pos.x, pos.y));
          }
        }, index * 300);
      });
    }

    function createFireworkParticle(x, y) {
      const angle = Math.random() * Math.PI * 2;
      const speed = Math.random() * 8 + 2;
      
      return {
        x, y,
        vx: Math.cos(angle) * speed,
        vy: Math.sin(angle) * speed,
        size: Math.random() * 4 + 2,
        color: getRandomColor(),
        life: 120,
        gravity: 0.1,
        fade: 0.98,
        type: 'firework'
      };
    }

    function releaseBalloons() {
      const balloonCount = 12;
      for (let i = 0; i < balloonCount; i++) {
        setTimeout(() => {
          const x = (window.innerWidth / (balloonCount + 1)) * (i + 1) + (Math.random() - 0.5) * 100;
          particles.push(createBalloonParticle(x));
        }, i * 150);
      }
    }

    function createBalloonParticle(x) {
      return {
        x,
        y: window.innerHeight + 50,
        vx: (Math.random() - 0.5) * 1.5,
        vy: -(Math.random() * 2 + 1.5),
        size: Math.random() * 15 + 20,
        color: getBalloonColor(),
        life: 500,
        type: 'balloon',
        swing: Math.random() * 0.03 + 0.02,
        swingOffset: Math.random() * Math.PI * 2,
        stringLength: Math.random() * 20 + 30
      };
    }

    // Render loop
    function renderLoop() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      
      for (let i = particles.length - 1; i >= 0; i--) {
        const p = particles[i];
        updateParticle(p);
        drawParticle(p);
        
        if (p.life <= 0 || p.y > canvas.height + 100) {
          particles.splice(i, 1);
        }
      }
      
      animationId = requestAnimationFrame(renderLoop);
    }

    function updateParticle(p) {
      if (p.type === 'confetti') {
        p.vy += p.gravity;
        p.x += p.vx;
        p.y += p.vy;
        p.rotation += p.rotationSpeed;
        p.life--;
      } else if (p.type === 'firework') {
        p.vy += p.gravity;
        p.x += p.vx;
        p.y += p.vy;
        p.life--;
        p.size *= p.fade;
      } else if (p.type === 'balloon') {
        // Natural balloon movement with swinging
        p.x += p.vx + Math.sin((p.life * p.swing) + p.swingOffset) * 1.2;
        p.y += p.vy;
        p.vy *= 0.999; // Slight air resistance
        p.life--;
      }
    }

    function drawParticle(p) {
      ctx.save();
      
      if (p.type === 'confetti') {
        ctx.translate(p.x, p.y);
        ctx.rotate(p.rotation * Math.PI / 180);
        ctx.fillStyle = p.color;
        ctx.fillRect(-p.size/2, -p.size/4, p.size, p.size/2);
      } else if (p.type === 'firework') {
        ctx.fillStyle = p.color;
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
        ctx.fill();
      } else if (p.type === 'balloon') {
        // Draw balloon string first (behind balloon)
        ctx.strokeStyle = '#8B4513';
        ctx.lineWidth = 1.5;
        ctx.setLineDash([]);
        ctx.beginPath();
        ctx.moveTo(p.x, p.y + p.size * 0.8);
        
        // Curved string with slight wave
        const stringX = p.x + Math.sin((p.life * p.swing) + p.swingOffset) * 3;
        const stringY = p.y + p.size * 0.8 + p.stringLength;
        ctx.quadraticCurveTo(
          p.x + Math.sin((p.life * p.swing * 2) + p.swingOffset) * 5, 
          p.y + p.size * 0.8 + p.stringLength * 0.5,
          stringX, 
          stringY
        );
        ctx.stroke();
        
        // Draw balloon shadow/depth
        const shadowOffset = p.size * 0.1;
        ctx.fillStyle = 'rgba(0,0,0,0.15)';
        ctx.beginPath();
        ctx.ellipse(p.x + shadowOffset, p.y + shadowOffset, p.size * 0.9, p.size, 0, 0, Math.PI * 2);
        ctx.fill();
        
        // Draw main balloon body
        ctx.fillStyle = p.color;
        ctx.beginPath();
        ctx.ellipse(p.x, p.y, p.size, p.size * 1.1, 0, 0, Math.PI * 2);
        ctx.fill();
        
        // Draw balloon highlight
        const highlightSize = p.size * 0.3;
        const gradient = ctx.createRadialGradient(
          p.x - p.size * 0.3, p.y - p.size * 0.3, 0,
          p.x - p.size * 0.3, p.y - p.size * 0.3, highlightSize
        );
        gradient.addColorStop(0, 'rgba(255,255,255,0.6)');
        gradient.addColorStop(1, 'rgba(255,255,255,0)');
        
        ctx.fillStyle = gradient;
        ctx.beginPath();
        ctx.arc(p.x - p.size * 0.3, p.y - p.size * 0.3, highlightSize, 0, Math.PI * 2);
        ctx.fill();
        
        // Draw balloon knot
        ctx.fillStyle = '#654321';
        ctx.beginPath();
        ctx.ellipse(p.x, p.y + p.size * 0.8, 3, 5, 0, 0, Math.PI * 2);
        ctx.fill();
      }
      
      ctx.restore();
    }

    // Utility functions
    function getRandomColor() {
      const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FFEAA7', '#DDA0DD', '#98D8C8', '#F7DC6F'];
      return colors[Math.floor(Math.random() * colors.length)];
    }

    function getBalloonColor() {
      const balloonColors = [
        '#FF6B6B', // Red
        '#4ECDC4', // Turquoise  
        '#45B7D1', // Blue
        '#96CEB4', // Green
        '#FFEAA7', // Yellow
        '#DDA0DD', // Plum
        '#FFB6C1', // Light Pink
        '#87CEEB', // Sky Blue
        '#98FB98', // Pale Green
        '#F0E68C'  // Khaki
      ];
      return balloonColors[Math.floor(Math.random() * balloonColors.length)];
    }

    function playBirthdayTune() {
      try {
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        const notes = [261.63, 261.63, 293.66, 261.63, 349.23, 329.63]; // Happy Birthday notes
        
        notes.forEach((frequency, index) => {
          const oscillator = audioCtx.createOscillator();
          const gainNode = audioCtx.createGain();
          
          oscillator.connect(gainNode);
          gainNode.connect(audioCtx.destination);
          
          oscillator.frequency.value = frequency;
          oscillator.type = 'sine';
          
          const startTime = audioCtx.currentTime + index * 0.3;
          gainNode.gain.setValueAtTime(0.1, startTime);
          gainNode.gain.exponentialRampToValueAtTime(0.01, startTime + 0.25);
          
          oscillator.start(startTime);
          oscillator.stop(startTime + 0.3);
        });
      } catch (error) {
        console.warn('Audio not supported');
      }
    }

    function shakeScreen() {
      document.body.animate([
        { transform: 'translate(0)' },
        { transform: 'translate(-10px, 5px)' },
        { transform: 'translate(10px, -5px)' },
        { transform: 'translate(-5px, 10px)' },
        { transform: 'translate(5px, -10px)' },
        { transform: 'translate(0)' }
      ], {
        duration: 500,
        easing: 'ease-in-out'
      });
    }

    function changeBackground() {
      document.documentElement.style.setProperty('--bg1', '#FF6B6B');
      document.documentElement.style.setProperty('--bg2', '#4ECDC4');
      
      setTimeout(() => {
        document.documentElement.style.setProperty('--bg1', '#667eea');
        document.documentElement.style.setProperty('--bg2', '#764ba2');
      }, 2000);
    }

    function showSuccessMessage() {
      const message = document.createElement('div');
      message.innerHTML = `
        <div style="
          position: fixed; top: 20px; left: 50%; transform: translateX(-50%);
          background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
          color: white; padding: 15px 25px; border-radius: 25px;
          font-weight: 600; font-size: 16px; z-index: 10001;
          box-shadow: 0 10px 30px rgba(0,0,0,0.3);
          animation: slideDown 0.5s ease-out;
        ">
          üéâ Ch√∫c m·ª´ng sinh nh·∫≠t ${CONFIG.recipient}! üéÇ
        </div>
      `;
      
      document.body.appendChild(message);
      
      setTimeout(() => {
        message.style.opacity = '0';
        message.style.transform = 'translateX(-50%) translateY(-100%)';
        setTimeout(() => message.remove(), 500);
      }, 3000);
    }

    function addPhotoSparkles() {
      const photo = document.getElementById('profilePhoto');
      if (!photo) return;
      
      // Add sparkle animation to photo
      photo.style.animation = 'profileGlow 0.5s ease-in-out, sparkle 2s ease-in-out';
      
      // Create sparkle particles around photo
      const rect = photo.getBoundingClientRect();
      const centerX = rect.left + rect.width / 2;
      const centerY = rect.top + rect.height / 2;
      
      for (let i = 0; i < 20; i++) {
        const sparkle = document.createElement('div');
        sparkle.style.cssText = `
          position: fixed;
          left: ${centerX + (Math.random() - 0.5) * 200}px;
          top: ${centerY + (Math.random() - 0.5) * 200}px;
          width: 4px; height: 4px;
          background: gold;
          border-radius: 50%;
          pointer-events: none;
          z-index: 10000;
          animation: sparkleOut 1.5s ease-out forwards;
        `;
        document.body.appendChild(sparkle);
        setTimeout(() => sparkle.remove(), 1500);
      }
    }

    // Start the app
    window.addEventListener('DOMContentLoaded', init);
    
    // Expose global function for button
    window.triggerSurprise = triggerSurprise;
  </script>

  <style>
    @keyframes slideDown {
      from { transform: translateX(-50%) translateY(-100%); opacity: 0; }
      to { transform: translateX(-50%) translateY(0); opacity: 1; }
    }
    
    @keyframes sparkle {
      0%, 100% { filter: brightness(1); }
      50% { filter: brightness(1.5) drop-shadow(0 0 15px gold); }
    }
    
    @keyframes sparkleOut {
      0% { opacity: 1; transform: scale(0); }
      50% { opacity: 1; transform: scale(1); }
      100% { opacity: 0; transform: scale(0) translateY(-50px); }
    }
  </style>
</body>
</html>
